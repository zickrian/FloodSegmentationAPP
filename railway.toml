[build]
builder = "nixpacks"

[deploy]
# Using start.sh to run only backend (backend-only deployment)
startCommand = "chmod +x start.sh && ./start.sh"
numReplicas = 1
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

[env]
PYTHONUNBUFFERED = "1"
PYTHONPATH = "/app"
OPENCV_HEADLESS = "1"
# CORS Origins - Set this to your Vercel frontend URL(s) after deployment
# Format: https://your-app.vercel.app,https://your-app.vercel.app/*
# Use "*" temporarily for initial deployment
CORS_ORIGINS = "*"
# Railway Bucket Configuration
# Set these in Railway Dashboard or override here
RAILWAY_BUCKET_NAME = "neat-gyoza-bevw8k9fvmbjyz"
# Model URLs from Railway Bucket (Recommended - set these in Railway Dashboard)
# Get URLs from Railway Bucket after uploading models
# MODEL_URL_UNET = ""
# MODEL_URL_UNETPP = ""
# Or use AWS CLI method with access keys (set in Railway Dashboard)
# RAILWAY_ACCESS_KEY_ID = ""
# RAILWAY_SECRET_ACCESS_KEY = ""
