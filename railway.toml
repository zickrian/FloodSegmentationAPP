[build]
builder = "nixpacks"

[deploy]
# Using start.sh to run both services
startCommand = "chmod +x start.sh && ./start.sh"
numReplicas = 1
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

[env]
PYTHONUNBUFFERED = "1"
PYTHONPATH = "/app"
OPENCV_HEADLESS = "1"
# API URL handled by Next.js rewrites - empty means use internal rewrite
NEXT_PUBLIC_API_URL = ""
